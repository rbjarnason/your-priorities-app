<html><head><script type="module" src="../../../../@polymer/polymer/polymer-legacy.js"></script><script type="module" src="../../../../@polymer/iron-flex-layout/iron-flex-layout-classes.js"></script><script type="module" src="../../../../lite-signal/lite-signal.js"></script><script type="module" src="../yp-app-globals/yp-app-icons.js"></script><script type="module" src="../yp-behaviors/yp-language-behavior.js"></script><script type="module" src="../yp-behaviors/yp-card-mouse-behavior.js"></script><script type="module" src="../yp-ajax/yp-ajax.js"></script><script type="module" src="../yp-post/yp-post-card.js"></script></head><body><dom-module id="yp-category"><template><style include="iron-flex iron-flex-alignment">:host{@apply --layout-horizontal;}.createPost{background-color:--var(accent-color-darker,#f57c00);position:fixed;bottom:24px;right:28px;}.card-container{@apply --layout-horizontal;@apply --layout-wrap;}yp-post-card{padding:16px;}[hidden]{display:none !important;}</style><lite-signal on-lite-signal-yp-language="_languageEvent"></lite-signal><yp-ajax id="ajax" url="" on-response="_postsResponse"></yp-ajax><yp-group-edit new="false" id="groupEdit" group="{{group}}" on-iron-form-response="_refresh"></yp-group-edit><div class="card-container"><h2 hidden$="[[!groupEmpty]]">[[t('group.is.empty')]]</h2><template is="dom-if" if="[[posts]]"><template is="dom-repeat" class="list" items="[[posts]]" as="post"><yp-post-card post="[[post]]" on-mouseover="cardMouseOver" on-mouseout="cardMouseOut"></yp-post-card></template></template><paper-fab mini="" icon="create" on-tap="_openEdit"></paper-fab></div></template><script type="module">import"../../node_modules/@polymer/polymer/polymer-legacy.js";import"../../node_modules/@polymer/iron-flex-layout/iron-flex-layout-classes.js";import"../../node_modules/lite-signal/lite-signal.js";import"../yp-app-globals/yp-app-icons.js";import{ypLanguageBehavior}from"../yp-behaviors/yp-language-behavior.js";import{ypCardMouseBehavior}from"../yp-behaviors/yp-card-mouse-behavior.js";import"../yp-ajax/yp-ajax.js";import"../yp-post/yp-post-card.js";import{Polymer}from"../../node_modules/@polymer/polymer/lib/legacy/polymer-fn.js";Polymer({is:"yp-category",behaviors:[ypLanguageBehavior,ypCardMouseBehavior],properties:{categories:{type:Array},defaultCategories:{type:Boolean,value:!1},posts:{type:Array},groupId:{type:Number,observer:"_groupIdChanged"},group:{type:Object},groupEmpty:{type:Boolean,value:!1}},_openEdit:function _openEdit(){this.$.groupEdit.open("edit",{groupId:this.group.id})},_refresh:function _refresh(){this.$.ajax.generateRequest()},_groupIdChanged:function _groupIdChanged(newValue,oldValue){if(newValue){this.set("posts",null);if(this.filter){window.selectedFilter=this.filter}this.$.ajax.url="/api/groups/"+this.groupId+"/posts/"+window.selectedFilter;if(this.categoryId){this.$.ajax.url+="/"+this.categoryId}this.$.ajax.generateRequest()}else{this.set("posts",null)}},_postsResponse:function _postsResponse(event,detail,sender){var group=detail.response.group;this.set("posts",detail.response.Posts);this.set("group",group);this._processCategories();this.fire("change-header",{headerTitle:group.name,headerDescription:group.objectives});if(0===detail.response.Posts.length)this.groupEmpty=!0;else this.groupEmpty=!1},_processCategories:function _processCategories(){if(this.categoryId){for(var i=0;i<this.group.Categories.length;i++){if(this.group.Categories[i].id==this.categoryId){window.selectedCategoryName=this.group.Categories[i].name}}}else{window.selectedCategoryName="categories.all"}},computeTitle:function computeTitle(){return this.t("post.add_new")}});</script></dom-module></body></html>